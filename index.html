<!DOCTYPE html>
<html lang="en" style="font-size: 79.5424px;">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

  <meta http-equiv="X-UA-Compatible" content="edge">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <title></title>
  <link rel="stylesheet" href="./css/game.css">
  <link rel="stylesheet" href="//at.alicdn.com/t/font_1018780_3sm10qths5a.css">
  <script src="//at.alicdn.com/t/font_1018780_3sm10qths5a.js"></script>
  <script type="text/javascript" src="./js/bodymovin.js"></script>
  <script type="text/javascript" src="./js/jweixin-1.3.2.js"></script>
  <script typet="text/javascript" src="./js/jquery-3.3.1.min.js"></script>
  <script type="text/javascript" src="./js/jquery.cookie.js"></script>
  <script type="text/javascript" src="./js/JicemoonMobileTouch.js"></script>
  <script type="text/javascript" src="./js/HardestGame.js"></script>
  <script type="text/javascript" src="./js/index.js"></script>
</head>
<body>
<audio id="back_music" preload="" src="./audio/bg_audio.mp3" loop="true"></audio>
<audio id="split_audio" preload="" src="./audio/split_audio.mp3"></audio>
<audio id="collision_audio" preload="" src="./audio/collision_audio.mp3"></audio>
<audio id="Countdown_10s_audio" preload="" src="./audio/Countdown_10s_audio.mp3"></audio>
<audio id="gameFail_audio" preload="" src="./audio/gameFail_audio.mp3"></audio>
<audio id="gameSuccess_audio" preload="" src="./audio/gameSuccess_audio.mp3"></audio>
<audio id="insert_audio" preload="" src="./audio/insert_audio.mp3"></audio>
<audio id="success_audio" preload="" src="./audio/success_audio.mp3"></audio>

<div class="start-box" id="start-box">
  <div class="circle-center"></div>

  <div class="mask-tips mask-tips1">
    <p>全部口红</p>
    <p>插入水果</p>
    <p>即挑战成功</p>
  </div>

  <div class="mask-tips mask-tips2">
    <p>挑战三关获得奖品</p>
  </div>

  <div class="mask-tips mask-tips3">
    <p>若碰到</p>
    <p>其他口红</p>
    <p>即挑战失败</p>
  </div>

  <div class="action flex-column-center">
    <div class="lipstick mb-20"></div>

    <div class="tips mb-10"><span>500</span>金币赢大奖</div>

    <div class="flex1-center">
      <div class="btn-start" id="start-btn">
        开始游戏
      </div>
    </div>

    <!--<div class="try-btn" id="try-btn">
      <span>试玩</span>
    </div>

    <div class="share-btn">
      <i class="iconfont icon-fenxiang"></i>
      <span class="">分享免费玩</span>
    </div>-->
  </div>
</div>

<div class="levelSwitchBox" id="levelSwitchBox" style="display: block;">
  <!--<img id="levelSwitchBoxMain" class="levelSwitchBoxMain" src="./img/level_1_main.jpg">-->
  <div id="levelSwitchBoxMain" class="levelSwitchBoxMain"
       style="background-image: url('./img/level_1_mains.jpg');"></div>
</div>

<div class="PopupBox" id="gameOverBox" style="display: none">
  <div class="flex-column-center">
    <div class="game-fail mb-20"></div>
    <div class="tips" id="not-tips">请再接再厉</div>
    <div class="fail-tips" id="fail-tips">
      <div class="level-tips mb-10">
        通过
        <span class="level-tips-num" id="level-tips-1">第一关</span>
        <span class="level-tips-num" id="level-tips-2">第二关</span>
      </div>
      <div class="gold-tips flex-center">
        获得
        <svg class="icon svg-icon" aria-hidden="true">
          <use xlink:href="#icon-jifenbi"></use>
        </svg>
        <span class="gold-num" id="reward-gold-num">0</span>
        积分
      </div>
    </div>
  </div>

  <div class="foot-btns flex-column-center">
    <div class="btn-again-start mb-10" id="game-restart-btn">
      重新开始游戏
    </div>

    <div class="btn-again-start mb-10" id="game-resurrection-btn">
      关卡复活
    </div>
    <!--<div class="btn-share mb-10">-->
    <!--邀请好友得免费游戏机会-->
    <!--</div>-->
    <!--<div class="popupBox-close">-->
    <!--<i class="iconfont icon-guanbi"></i>-->
    <!--</div>-->
  </div>

</div>


<div class="PopupBox" id="gameSuccessBox" style="display: none;">
  <!--<div id="gameSuccessClose" class="close"><img src="https://wxopen.yiszh.com/addons/wn_ttrouges/style/img/close_btn.jpg"></div>-->
  <!--<div id="gameSuccessBoxText">恭喜您，闯关成功</div>-->
  <!--<div class="PopupBoxBtn" id="gameSuccessBoxBtn">点击我的口红领取</div>-->

  <div class="flex-column-center">
    <div class="game-success mb-20">
      <div class="product">
        <img src="./img/product.png" class="product-image">
        <div class="product-name">
          YSL圣罗兰纯口红 方管正红色正品
        </div>
      </div>
    </div>

  </div>

  <div class="foot-btns flex-column-center">
    <div class="btn-again-start mb-10" id="again-btn">
      再挑战一次
    </div>

    <!--<div class="btn-share mb-10">-->
      <!--查看我的礼品-->
    <!--</div>-->
  </div>

</div>


<!-- blur -->
<div class="layoutRoot" id="app" data-game_id="undefined" data-openid="">
  <div class="game" id="game" style="width: 596px; height: 938px;">
    <div class="account">
      <!--<img class="avatar" src="https://h5.lipstick.lemiao.xyz/play/trail/?h5=1&amp;unionid=orLqYwz20BqFmMvAjg97kcEykaTo">-->
      <span></span>
    </div>
    <!--<div class="bulletsNumBox">-->
      <!--<img class="bulletsNum" id="bulletsNum1" src="./img/6.png">-->
      <!--<img class="bulletsNum" id="bulletsNum2" src="https://h5.lipstick.lemiao.xyz/play/trail/?h5=1&amp;unionid=orLqYwz20BqFmMvAjg97kcEykaTo" style="display: none;">-->
    <!--</div>-->
    <canvas style="position: relative;z-index: 3" id="gameStage" width="596" height="938"></canvas>
    <div id="bm"
         style="width: 100%; height: 100%;position: fixed;background-color: rgba(0,0,0,0);top: 5.3rem; transform: translate(-5%,-1%); z-index: 2">
    </div>
    <div class="tips">
      <p id="currentLevel">当前关数: <span>1</span></p>
      <p id="gameTip"></p>
    </div>

    <div class="header">

      <div class="left">
        <div class="back">
          <i class="iconfont icon-fanhui"></i>
        </div>

        <div id="timebox">0</div>
      </div>

      <div class="levelbox" id="levelbox">
        <div class="level active" id="level_1">
          <i class="iconfont icon-bg_guanqia"></i>
          <span class="num">1</span>
        </div>
        <div class="level" id="level_2">
          <i class="iconfont icon-bg_guanqia"></i>
          <span class="num">2</span>
        </div>
        <div class="level" id="level_3">
          <i class="iconfont icon-bg_guanqia"></i>
          <span class="num">3</span>
        </div>
      </div>

      <div class="right">
        <div class="my-gold flex-center">
          <svg class="icon svg-icon" aria-hidden="true">
            <use xlink:href="#icon-jinbi"></use>
          </svg>
          <span id="my-gold-num">500</span>
          <i class="iconfont icon-jia"></i>
        </div>
      </div>
    </div>

    <div class="lipstick-wrap flex-center">
      <div class="small-lipstick"></div>
      <div class="lipstick-num" id="lipstick-num">X0</div>
    </div>

  </div>
</div>
<script type="text/javascript">
  var loadedMusic = false;
  var game_id = $("#app").attr("data-game_id");
  // var openid=1;

  // var h5Host = "https://wopen.wunengkeji.com/";
  document.body.addEventListener('touchmove', function (e) {
    e.preventDefault(); //阻止默认的处理方式(阻止下拉滑动的效果)
  }, {passive: false});
  var baseUrl = function GetRequest() {

    var url = location.search;  //获取url中"?"符后的字符串

    var theRequest = new Object();
    if (url.indexOf("?") != -1) {
      url = url.split("?")[1];
      strs = url.split("&");
      for (var i = 0; i < strs.length; i++) {
        theRequest[strs[i].split("=")[0]] = (strs[i].split("=")[1]);
      }
    }
    return theRequest;

  }
  var jsonParamsAlias = baseUrl();
  // var jsonParams = {
  //     "game_id" : jsonParamsAlias.gid,
  //     "game_pay" : jsonParamsAlias.pay,
  //     "product_id" : jsonParamsAlias.pid,
  //     "randomNum" : jsonParamsAlias.rand,
  //     "forecast_result": jsonParamsAlias.res,
  //     "user_id" : jsonParamsAlias.uid
  // }
  var jsonParams = {
    "game_id": "undefined",
    "game_pay": "132",
    "product_id": "465",
    "randomNum": "4541",
    "forecast_result": "1321",
    "openid": jsonParamsAlias.userId
  }

  var openid = jsonParamsAlias.userId
  var orderId = jsonParamsAlias.orderId
  if (jsonParamsAlias.slient) {
    $('audio').prop('muted', true);
  }
  if (jsonParamsAlias.h5 && jsonParamsAlias.h5 == "1") {
    window.isH5 = true;
  }
  var cookieDelTime = new Date(Math.floor(new Date(new Date().getTime() + 150000)));
  $.cookie('game_cookie', null);
  $.cookie('game_cookie', JSON.stringify(jsonParams), {expires: cookieDelTime});
  var anim = bodymovin.loadAnimation({
    wrapper: document.querySelector('#bm'),
    animType: 'svg',
    loop: false,
    autoplay: false,
    prerender: true,
    path: './json/data.json'
  });

  function play() {
    anim.goToAndStop(0, true)
    anim.play()
  }

  document.addEventListener('DOMContentLoaded', function () {
    function audioAutoPlay() {
      var audio = document.getElementById('back_music');
      // audio.play();
      // document.addEventListener("WeixinJSBridgeReady", function () {
      //     audio.play();
      // }, false);
    }

    audioAutoPlay();
  });

  document.addEventListener('visibilitychange', function (e) {
    function audioStop() {
      var audio = document.getElementById('back_music');
      document.hidden ? audio.pause() : audio.play();
      document.addEventListener("WeixinJSBridgeReady", function () {
        document.hidden ? audio.pause() : audio.play();
      }, false);
    }

    audioStop();
  });
</script>